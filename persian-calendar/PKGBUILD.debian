# Maintainer: Amir Mohammadi <183.amir@gmail.com>
pkgname=persian-calendar
pkgver=3.0.4
pkgrel=1
pkgdesc="A Persian (Jalali/Farsi) calendar appindicator"
arch=('any')
url="http://183amir.github.io/persian-calendar/"
license=('GPLv2')
depends=('python3' 'libappindicator3-1')
source=($pkgname-$pkgver.tar.gz::https://github.com/183amir/$pkgname/archive/v$pkgver.tar.gz
	persian-calendar.desktop)
md5sums=('f0ba24e92c6360555070ede0d0b456f3'
         'e5278eb01fe45dcd36603d5c1a096e45')

package() {
	mkdir -p "$pkgdir/opt/persian-calendar"
	chmod 775 "$pkgdir/opt/persian-calendar"
	cp -r $srcdir/$pkgname-$pkgver/* "$pkgdir/opt/persian-calendar"

	# remove unnecessary files
	rm "$pkgdir/opt/persian-calendar/data/icon_generator.py"
	rm "$pkgdir/opt/persian-calendar/data/persian-calendar.desktop"
	rm "$pkgdir/opt/persian-calendar/data/Screenshot.png"

	install -Dm644 "$srcdir"/persian-calendar.desktop "$pkgdir"/usr/share/applications/persian-calendar.desktop
	install -Dm644 "$srcdir/$pkgname-$pkgver"/data/icons/ubuntu-mono-dark/persian-calendar-`date +%-d`.png "$pkgdir"/usr/share/pixmaps/persian-calendar.png
	install -D -m644 "$srcdir/$pkgname-$pkgver"/LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
